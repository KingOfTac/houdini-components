function t(t,a,e){e.x=a.x-t.x,e.y=a.y-t.y,e.len=Math.sqrt(e.x*e.x+e.y*e.y),e.nx=e.x/e.len,e.ny=e.y/e.len,e.ang=Math.atan2(e.ny,e.nx)}const a=function(t,a){return a.map(a=>{switch(a.variable=`--${t}-${a.name}`,a.type){case"number":a.value=t=>parseInt(t);break;case"string":a.value=t=>t.toString().trim();break;case"boolean":case"object":a.value=t=>JSON.parse(t)}}),Object.defineProperties({},{propsMap:{value:a},values:{get:function(){const t=[];return this.propsMap.forEach(a=>t.push(a.value)),t}},variableStrings:{get:function(){const t=[];return this.propsMap.forEach(a=>t.push(a.variable)),t}}})}("polygon",[{name:"color",type:"string"},{name:"sides",type:"number"},{name:"rotation",type:"number"},{name:"radius",type:"number"},{name:"rounded",type:"boolean"}]);registerPaint("polygon",class{static get inputProperties(){return a.variableStrings}paint(e,n,s){const i={};a.propsMap.forEach(t=>i[t.name]=t.value(s.get(t.variable)));const r=Math.min(n.width,n.height)/2,o={x:n.width/2,y:n.height/2};e.translate(n.width/2,n.height/2),e.rotate(i.rotation*Math.PI/180),e.translate(-n.width/2,-n.height/2),e.beginPath();let h=o.x+r*Math.cos(2*Math.PI*0/i.sides),l=o.y+r*Math.sin(2*Math.PI*0/i.sides);e.moveTo(h,l);const c=[];for(let t=1;t<=i.sides;++t)h=o.x+r*Math.cos(2*Math.PI*t/i.sides),l=o.y+r*Math.sin(2*Math.PI*t/i.sides),c.push({x:h,y:l,radius:0});i.rounded?function(a,e,n){let s,i,r,o,h,l,c,M,p,u,y,g,x=e.length,d=e[x-1],b={},m={},P=n;for(let n=0;n<x;n++)r=e[n%x],o=e[(n+1)%x],t(r,d,b),t(r,o,m),h=b.nx*m.ny-b.ny*m.nx,l=b.nx*m.nx-b.ny*-m.ny,p=Math.asin(h<-1?-1:h>1?1:h),c=1,M=!1,l<0?p<0?p=Math.PI+p:(p=Math.PI-p,c=-1,M=!0):p>0&&(c=-1,M=!0),u=p/2,g=Math.abs(Math.cos(u)*P/Math.sin(u)),g>Math.min(b.len/2,m.len/2)?(g=Math.min(b.len/2,m.len/2),y=Math.abs(g*Math.sin(u)/Math.cos(u))):y=P,s=r.x+m.nx*g,i=r.y+m.ny*g,s+=-m.ny*y*c,i+=m.nx*y*c,a.arc(s,i,y,b.ang+Math.PI/2*c,m.ang-Math.PI/2*c,M),d=r,r=o;a.closePath()}(e,c,i.radius):function(t,a,e,n){for(let s=1;s<=e;++s){let i=a.x+n*Math.cos(2*Math.PI*s/e),r=a.y+n*Math.sin(2*Math.PI*s/e);t.lineTo(i,r)}}(e,o,i.sides,r),e.closePath(),e.fillStyle=i.color,e.fill()}});
